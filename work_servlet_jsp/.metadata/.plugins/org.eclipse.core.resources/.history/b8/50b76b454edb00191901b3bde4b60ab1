package edu.ssafy.model;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

public class MemberManager {
	private static ArrayList<MemberVO> list = new ArrayList<>();
	private static MemberManager man = new MemberManager();
	private Connection conn;
	private PreparedStatement st;
	private ResultSet rs;
	
	private MemberManager() {
	}

	public static MemberManager getInstance() {
		return man;
	}

	public boolean addMember(MemberVO memberVO) {
		String sql = "insert into members(name, userid, pwd, email, phone, admin)values(?,?,?,?,?,?)";
		boolean res = false;
		try {
			conn = ConnectionProxy.getConnection();
			st = conn.prepareStatement(sql);
			st.setString(1, memberVO.getName());
			st.setString(2, memberVO.getUserid());
			st.setString(3, memberVO.getPwd());
			st.setString(4, memberVO.getEmail());
			st.setString(5, memberVO.getPhone());
			st.setInt(6, memberVO.getAdmin());
			res = st.execute();
			res = true;
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			res = false;
		}finally {
			close();
		}
		return res;	
	}
	public MemberVO getMember(String userid) {
		String sql = "SELECT * FROM members WHERE userid=?";
		try {
			conn = ConnectionProxy.getConnection();//sql 통로
			st = conn.prepareStatement(sql); //상자규격에 담아서 sql을 보내자
			rs = st.executeQuery(); // > DQL 결과가 테이블로 나올때  
			//execute > DDL쓸때 테이블수정/삭제
			//executeUpdate > DML
		} catch (SQLException e) {
			
			e.printStackTrace();
		}
	}
	public List<MemberVO> getMemberList(){
		
	}
	
	public void close() {
		try {
			if (rs != null)
				rs.close();
			if (st != null)
				st.close();
			if (conn != null)
				conn.close();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}
