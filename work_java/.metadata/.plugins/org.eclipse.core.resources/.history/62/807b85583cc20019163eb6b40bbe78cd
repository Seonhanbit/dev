package com.ssafy.chap02;

import java.sql.*;
import java.util.ArrayList;

public class DBManager {
	// 맴버변수라서 디폴트 초기화라 초기화 필요 없음
	private Connection con;
	private PreparedStatement pst;
	// 객체 생성될때 1번만 생성됨 >>static, 매니저 생성될떄마다 로딩되면 안되니까
	static {
		try {
			// 1. 드라이버 로딩
			Class.forName("com.mysql.cj.jdbc.Driver");
		} catch (ClassNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	public DBManager() throws SQLException {
		// 2. connection 연결, 던져야하는이유 > 메인에서 매니저 호출 시 다음 문장 실행되면 안돼
		con = DriverManager.getConnection(
				"jdbc:mysql://127.0.0.1:3306/scott?serverTimezone=UTC&useUniCode=yes&characterEncoding=UTF-8", "ssafy",
				"ssafy");
	}
	
	//필요할 메소드 구현하기
	public boolean insertCustomer(String name, int age, String addr) {
		String str = "insert into customer(name, age, addr)values(?,?,?)";
		boolean res = false;
		try {
			pst = con.prepareStatement(str);
			pst.setString(1, name);
			pst.setInt(2, age);
			pst.setString(3, addr);
			res = pst.execute();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return false;
	}
	public boolean updateCustomer(int num, String name, int age, String addr) {

		return false;
	}
	public boolean deleteCustomer(int num, String name, int age, String addr) {

		return false;
	}
	//전체 조회
	public ArrayList<CustomerVO> queryCustomer(){
		String sql = "select * from Customer";
		pst = con.prepareStatement(sql);
		pst.setInt(1, 2000);
		pst.setInt(2, 10);
		pst.setString(3, "king");
		return null;
	}
	//검색
	public ArrayList<CustomerVO> queryCustomerByNum(int num){
		return null;
	}
	public void close() {
		
	}

}
